# @hypequery/cli

Command-line tools for HypeQuery, the TypeScript-first database query builder.

## Installation

```bash
npm install -g @hypequery/cli
```

Or use it directly with npx:

```bash
npx @hypequery/cli ./path/to/output.ts
```

## Usage

The CLI tool generates TypeScript type definitions from your ClickHouse database schema:

```bash
hypequery ./path/to/output.ts
```

### Configuration

The CLI requires connection information for your ClickHouse database. You can provide this in several ways:

#### Environment Variables

Create a `.env` file in your project directory with:

```
CLICKHOUSE_HOST=http://localhost:8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=your_database
```

Or set them in your environment:

```bash
export CLICKHOUSE_HOST=http://localhost:8123
export CLICKHOUSE_USER=default
export CLICKHOUSE_PASSWORD=
export CLICKHOUSE_DATABASE=your_database
```

The CLI also supports the `VITE_` prefixed versions of these variables for compatibility with Vite-based projects.

## Generated Types

The tool generates an `IntrospectedSchema` interface that maps table names to their column types:

```typescript
// Generated by @hypequery/cli
import { ColumnType } from '@hypequery/clickhouse';

export interface IntrospectedSchema {
  users: {
    id: 'Int32';
    name: 'String';
    email: 'String';
    created_at: 'DateTime';
  };
  // other tables...
}
```

You can then use this with the HypeQuery query builder:

```typescript
import { createQueryBuilder } from '@hypequery/clickhouse';
import { IntrospectedSchema } from './generated-schema';

const db = createQueryBuilder<IntrospectedSchema>({
  host: process.env.CLICKHOUSE_HOST!,
  // other connection options...
});

// Type-safe queries
const users = await db.table('users')
  .select(['id', 'name', 'email'])
  .where('created_at', 'gt', new Date('2023-01-01'))
  .execute();
```

## License

MIT 