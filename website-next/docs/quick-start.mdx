---
title: Quick Start
description: Ship your first hypequery-powered endpoint in minutes
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';
import { Step, Steps } from 'fumadocs-ui/components/steps';
import { CodeBlock } from 'fumadocs-ui/components/codeblock';
import { File, Folder, Files } from 'fumadocs-ui/components/files';

## Prerequisites

Before you begin, ensure you have:

- **Node.js 18+** installed
- **Access to a ClickHouse instance** with connection credentials

---

<Steps>
<Step>

### Install the runtime packages

Install the core packages required to run hypequery:

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']} defaultIndex={0}>
  <Tab value='npm' label='npm'>
  <CodeBlock>
    ```bash
    npm install @hypequery/clickhouse @hypequery/serve

    # Optional: install the CLI locally
    npm install -D @hypequery/cli
    ```
    </CodeBlock>
  </Tab>
  <Tab value='pnpm' label='pnpm'>
   <CodeBlock>
    ```bash
    pnpm add @hypequery/clickhouse @hypequery/serve

    # Optional: install the CLI locally
    pnpm add -D @hypequery/cli
    ```
  </CodeBlock>
  </Tab>
  <Tab value='yarn' label='yarn'>
   <CodeBlock>
    ```bash
    yarn add @hypequery/clickhouse @hypequery/serve

    # Optional: install the CLI locally
    yarn add -D @hypequery/cli
    ```
     </CodeBlock>
  </Tab>
  <Tab value='bun' label='bun'>
   <CodeBlock>
    ```bash
    bun add @hypequery/clickhouse @hypequery/serve

    # Optional: install the CLI locally
    bun add -D @hypequery/cli
    ```
    </CodeBlock>
  </Tab>
</Tabs>

</Step>

<Step>

### Scaffold analytics with `hypequery init`

From your project root, run the init command:

<Tabs items={['without CLI installed', 'with CLI installed']} defaultIndex={0}>
  <Tab value='without CLI installed' label='without CLI installed'>
   <CodeBlock>
    ```bash
    npx @hypequery/cli init
    ```
    </CodeBlock>
  </Tab>

  <Tab value='with CLI installed' label='with CLI installed'>
   <CodeBlock>
    ```bash
    npx hypequery init
    ```
    </CodeBlock>
  </Tab>
</Tabs>

The CLI will prompt you to:

1. **Choose ClickHouse** as your database
2. **Enter connection settings** (host, port, username, password, database)
3. **Select a destination folder** (defaults to `analytics/`)

### What the CLI Generates

The init command creates:

<Files>
  <Folder name="analytics" defaultOpen>
    <File name="schema.ts (Your database schema definitions)" />
    <File name="client.ts (ClickHouse client instance)" />
    <File name="queries.ts (Your query definitions)" />
    <File name=".env (Your ClickHouse credentials)" />
    </Folder>
 </Files>


It also scaffolds an example query to get you started.

</Step>

<Step>

### Define your first query

Open `analytics/queries.ts` and replace the placeholder with a real query:

<CodeBlock>
```typescript
import { initServe } from '@hypequery/serve';
import { z } from 'zod';
import { db } from './client';

const { define, queries, query } = initServe({
  context: () => ({ db }),
});

export const api = define({
  queries: queries({
    activeUsers: query
      .describe('Most recent active users')
      .input(z.object({
        limit: z.number().min(1).max(500).default(50)
      }))
      .query(({ ctx, input }) =>
        ctx.db
          .table('users')
          .select(['id', 'email', 'created_at'])
          .where('status', 'eq', 'active')
          .orderBy('created_at', 'DESC')
          .limit(input.limit)
          .execute()
      ),
  }),
});
```
 </CodeBlock>

### Running Your Query

You can run your query in two ways:

<Tabs items={['embedded', 'over HTTP']} defaultIndex={0}>
  <Tab value='embedded' label='embedded'>
  <CodeBlock>
    ```typescript
    // Run directly in your code (jobs, SSR, scripts)
    const latest = await api.run('activeUsers', { limit: 25 });
    console.log(latest);
    ```
    </CodeBlock>
  </Tab>

  <Tab value='over HTTP' label='over HTTP'>
  <CodeBlock>
    ```typescript
    // Expose as an HTTP endpoint
    api.route('/active-users', api.queries.activeUsers, {
      method: 'POST'
    });
    ```
    </CodeBlock>
  </Tab>
</Tabs>

<Callout type="info" title="Remember">
  - Use `ctx.db` inside serve queries (it carries per-request context)
  - Return the promise; hypequery awaits it for you
  - Always finish query builder chains with `.execute()`
</Callout>

</Step>

<Step>

### Preview docs with `hypequery dev` (Optional)

Start the dev server to view docs and logs:

<Tabs items={['without CLI installed', 'with CLI installed']} defaultIndex={0}>
  <Tab value='without CLI installed' label='without CLI installed'>
  <CodeBlock>
    ```bash
    npx @hypequery/cli dev
    ```
    </CodeBlock>
  </Tab>

  <Tab value='with CLI installed' label='with CLI installed'>
  <CodeBlock>
    ```bash
    npx hypequery dev
    ```
  </CodeBlock>
  </Tab>
</Tabs>

The dev server provides:

- **Interactive docs** at `http://localhost:4000` - test your queries with live validation
- **OpenAPI spec** at `http://localhost:4000/openapi.json` - for downstream tooling
- **Hot reload** - changes to your queries are reflected immediately with logs

Keep this running while you develop or when teammates need to test the HTTP API locally.

</Step>

</Steps>
