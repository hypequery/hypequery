---
layout: ../../../layouts/DocsLayout.astro
title: Installation Options
description: Choose how you want to use hypequery based on your needs
---

# Installation Options

Choose how you want to use hypequery based on your needs.

---

## üöÄ Serve Framework (Recommended)

**Best for:** Teams that need to reuse the same analytics across multiple contexts (APIs, cron jobs, internal tools, agents)

```bash
npm install @hypequery/clickhouse @hypequery/serve
```

**Why serve over standalone?**

**Define once, use everywhere:**
```ts
// Define your analytics once
export const api = defineServe({
  context: () => ({ db }),
  queries: {
    activeUsers: {
      input: z.object({ role: z.string().optional() }),
      query: ({ ctx, input }) =>
        ctx.db.table('users')
          .where('status', 'eq', 'active')
          .where(input.role ? ['role', 'eq', input.role] : null)
          .select(['id', 'name', 'email'])
          .execute()
    }
  }
});
```

**Then execute anywhere - same query, zero duplication:**
```ts
// In-process (cron jobs, background workers)
const users = await api.run('activeUsers', { role: 'admin' });

// HTTP endpoint (automatic OpenAPI)
app.use('/api', serveHTTP(api));

// React hooks (optional @hypequery/react package)
const { data } = useQuery('activeUsers', { role: 'admin' });
```

**What you get with serve:**
- ‚úÖ **Named, reusable query definitions** - No more duplicating SQL logic
- ‚úÖ **Input validation** - Zod schemas validate inputs automatically
- ‚úÖ **Type inference** - Full type safety from definition to execution
- ‚úÖ **Runtime flexibility** - Execute embedded or expose via HTTP
- ‚úÖ **Authentication & multi-tenancy** - Built-in when you need it
- ‚úÖ **Auto-generated OpenAPI** - HTTP layer with zero config

**[Continue to Quickstart ‚Üí](/docs/getting-started/quickstart)**

---

## üîß Standalone Query Builder

**Best for:** Integrating into existing apps or when you don't need named, reusable query definitions

```bash
npm install @hypequery/clickhouse
```

**When to choose standalone:**
- You already have Express/Fastify/Next.js API routes
- You're building simple scripts or one-off queries
- You want maximum control without any framework
- You don't need to reuse the same query across multiple contexts

**Example:**
```ts
// Direct query execution
import { createQueryBuilder } from '@hypequery/clickhouse';
import type { Schema } from './generated-schema';

const db = createQueryBuilder<Schema>({
  host: 'http://localhost:8123',
  database: 'default'
});

// Execute queries directly - no query definitions
const users = await db.table('users')
  .where('status', 'eq', 'active')
  .select(['id', 'name', 'email'])
  .execute();
```

**Trade-offs:**
- ‚úÖ Type-safe query builder
- ‚úÖ Works with any framework
- ‚úÖ Lightweight (no extra dependencies)
- ‚ùå Queries aren't reusable (duplication across codebase)
- ‚ùå No input validation
- ‚ùå No built-in HTTP/OpenAPI
- ‚ùå Manual auth/multi-tenancy

**[Continue to Standalone Setup ‚Üí](/docs/standalone/setup)**

---

## Adding React Hooks (Optional)

If you're using serve and want type-safe React hooks:

```bash
npm install @hypequery/react
```

```tsx
import { createHooks } from '@hypequery/react';
import { api } from './api';

const { useQuery } = createHooks(api);

function UserList() {
  // Full type inference from your query definitions
  const { data } = useQuery('activeUsers', { role: 'admin' });

  return <div>{data?.map(u => u.name)}</div>;
}
```

React hooks work with serve, not standalone.

---

## Can I switch later?

**Yes!** Start standalone and add serve later:

```bash
npm install @hypequery/serve
```

Your existing query builder code works the same way inside `defineServe`:

```ts
// Before: Standalone
const users = await db.table('users')
  .where('status', 'eq', 'active')
  .execute();

// After: Inside serve (same query builder API)
export const api = defineServe({
  queries: {
    activeUsers: {
      query: ({ ctx }) =>
        ctx.db.table('users')
          .where('status', 'eq', 'active')
          .execute()
    }
  }
});
```

---

## Next Steps

**Chose serve?** [Core Concepts](/docs/getting-started/core-concepts) - Understand the architecture

**Chose standalone?** [When to Use Standalone](/docs/standalone/when-to-use) - Use cases and setup

**Want to explore first?** [Building Queries](/docs/queries/query-building) - Learn the query builder API
