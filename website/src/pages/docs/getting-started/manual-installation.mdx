---
layout: ../../../layouts/DocsLayout.astro
title: Manual Installation
description: Install @hypequery packages, configure env vars, and prep your project for the CLI
---

import Callout from '../../../components/Callout.astro';

<div class="prose">

# Manual Installation

Use this page as the “zero-to-installed” checklist before you run the CLI or scaffold metrics.

## Requirements

- **Node.js 18+** (local dev relies on native `fetch` and top-level await)
- **Package manager** – npm, pnpm, or Yarn
- **ClickHouse instance** – self-hosted or ClickHouse Cloud

## 1. Install core packages

These packages cover query building, the CLI, and the dev server:

```bash
# npm
npm install -D @hypequery/cli
npm install @hypequery/clickhouse @hypequery/serve

# pnpm
pnpm add -D @hypequery/cli
pnpm add @hypequery/clickhouse @hypequery/serve

# yarn
yarn add -D @hypequery/cli
yarn add @hypequery/clickhouse @hypequery/serve
```

## 2. Configure environment variables

Create an `.env` file (the CLI will generate one later, but manual setup works too):

```env
CLICKHOUSE_HOST=https://example.clickhouse.cloud:8443
CLICKHOUSE_DATABASE=default
CLICKHOUSE_USERNAME=cli_user
CLICKHOUSE_PASSWORD=super-secret
```

## 3. Manual project setup

If you’d rather not run `hypequery init` but want to install manually:

1. Create `analytics/schema.ts`, `analytics/client.ts`, and `analytics/queries.ts`.

2. Generate schema types from your ClickHouse instance:
   ```bash
   npx hypequery generate --output analytics/schema.ts
   ```
   The CLI reads the `CLICKHOUSE_*` vars you set earlier, introspects tables, and writes type-safe definitions to `schema.ts`. Re-run this anytime your ClickHouse schema changes.

3. `client.ts` wires the ClickHouse connection:
   ```ts
   import 'dotenv/config';
   import { createQueryBuilder } from '@hypequery/clickhouse';
   import type { IntrospectedSchema } from './schema';

   export const db = createQueryBuilder<IntrospectedSchema>({
     host: process.env.CLICKHOUSE_HOST!,
     database: process.env.CLICKHOUSE_DATABASE!,
     username: process.env.CLICKHOUSE_USERNAME!,
     password: process.env.CLICKHOUSE_PASSWORD,
   });
   ```

4. `queries.ts` exports a placeholder Serve instance:
   ```ts
   import { initServe } from '@hypequery/serve';
   import { db } from './client';

   const { define, queries, query } = initServe({
     context: () => ({ db }),
   });

   export const api = define({
     queries: queries({
       healthcheck: query
         .describe('Health check placeholder')
         .query(async () => ({ ok: true })),
     }),
   });
   ```

## 4. Framework notes

**Next.js / Remix / other SSR frameworks**

- Ensure env vars are available wherever you import `api`. When deploying to edge platforms, swap the handler with the fetch adapter:

  ```ts
  // app/api/analytics/route.ts (Next.js App Router)
  import { createFetchHandler } from '@hypequery/serve/adapters/fetch';
  import { api } from '../../../analytics/queries';

  const handler = createFetchHandler(api.handler);

  export const GET = handler;
  export const POST = handler;
  ```

**Vite / SPA frameworks**

- Store hypequery files server-side, browsers should call the generated HTTP endpoints, not ClickHouse directly.

## Next steps

- Explore the fluent builder in [Query Building](/docs/define/query-building)

 </div>
