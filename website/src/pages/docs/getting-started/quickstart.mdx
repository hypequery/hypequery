---
layout: ../../../layouts/DocsLayout.astro
title: Quickstart
description: Ship your first hypequery-powered endpoint in two CLI commands
---

# Quickstart

Shipping your first hypequery API now only takes two CLI commands. No CLI installation needed—just use `npx @hypequery/cli init` to scaffold everything (env, client, schema, queries), fire up the dev server, then add a real metric.

### Prereqs

- Node.js 18+
- Access to a ClickHouse instance with credentials
- Install the runtime packages:

  ```bash
  npm install @hypequery/clickhouse @hypequery/serve
  ```

**CLI installation is optional.** You can run all commands with `npx @hypequery/cli` without installing anything. Or install locally so teammates share the same version:

```bash
# Optional - install CLI locally
npm install -D @hypequery/cli

# Then use shorter commands
npx hypequery init
```

## 1. Scaffold analytics files with `hypequery init`

From your project root run:

```bash
# Without CLI installed
npx @hypequery/cli init

# Or if CLI is installed
npx hypequery init
```

Pick ClickHouse, supply your connection settings, and choose a destination folder (`analytics/` by default). The CLI will:

- Validate the ClickHouse connection
- Generate `analytics/schema.ts`, `analytics/client.ts`, and `analytics/queries.ts`
- Write/append `.env` with your credentials
- Populate an example query (optional) and register it in the queries file

Open `analytics/queries.ts` to see the scaffolded `initServe` export with the fluent builder. You can start editing immediately.

## 2. Preview with `hypequery dev`

Launch the dev server to get interactive docs, a playground, and an OpenAPI schema:

```bash
# Without CLI installed
npx @hypequery/cli dev

# Or if CLI is installed
npx hypequery dev
```

The command watches your analytics files, refreshes docs, and exposes:

- http://localhost:4000 – interactive docs + playground
- http://localhost:4000/openapi.json – OpenAPI description for any downstream tooling

Leave this running while you iterate.

## 3. Build your first query

Replace the placeholder query in `analytics/queries.ts` with something real. For example:

```typescript
import { initServe } from '@hypequery/serve';
import { z } from 'zod';
import { db } from './client';

const { define, queries, query } = initServe({
  context: () => ({ db }),
});

export const api = define({
  queries: queries({
    activeUsers: query
      .describe('Most recent active users')
      .input(z.object({ limit: z.number().min(1).max(500).default(50) }))
      .query(({ ctx, input }) =>
        ctx.db
          .table('users')
          .select(['id', 'email', 'created_at'])
          .where('status', 'eq', 'active')
          .orderBy('created_at', 'DESC')
          .limit(input.limit)
          .execute()
      ),
  }),
});
```

Save the file and the dev UI immediately shows the new metric with typed inputs/outputs. Use the browser playground or call `await api.execute('activeUsers')` from your app/agent code.

## Next steps

- Wire metrics into production code with [Metric Modules](/docs/define/metric-modules)
- Explore the fluent builder in [Query Building](/docs/define/query-building)
- Regenerate schema types on demand with [`hypequery generate`](/docs/reference/cli#hypequery-generate)
- Share the API via [HTTP + OpenAPI](/docs/ship/http-openapi)

Once the flow feels solid, add CI checks (`npx @hypequery/cli generate` + tests) so schema drift is caught automatically.
