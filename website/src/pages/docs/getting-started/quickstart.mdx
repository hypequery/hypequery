---
layout: ../../../layouts/DocsLayout.astro
title: Quickstart
description: Ship your first hypequery-powered endpoint in two CLI commands
---

import Callout from '../../../components/Callout.astro';


# Quickstart

Shipping your first hypequery API only takes two CLI commands. No CLI installation needed—just use `npx @hypequery/cli init` to scaffold everything (env, client, schema, queries), fire up the dev server, then add a real metric.

### Prereqs

- Node.js 18+
- Access to a ClickHouse instance with credentials
- Install the runtime packages:

  ```bash
  npm install @hypequery/clickhouse @hypequery/serve
  ```

**CLI installation is optional.** You can run all commands with `npx @hypequery/cli` without installing anything. Or install locally so teammates share the same version:

```bash
# Optional - install CLI locally
npm install -D @hypequery/cli

# Then use shorter commands
npx hypequery init
```

## Scaffold analytics files with `hypequery init`

From your project root run:

```bash
# Without CLI installed
npx @hypequery/cli init

# Or if CLI is installed
npx hypequery init
```

Pick ClickHouse, supply your connection settings, and choose a destination folder (`analytics/` by default). The CLI will:

- Validate the ClickHouse connection
- Generate `analytics/schema.ts`, `analytics/client.ts`, and `analytics/queries.ts`
- Write/append `.env` with your credentials
- Populate an example query (optional) and register it in the queries file

Open `analytics/queries.ts` to see the scaffolded `initServe` export with the fluent builder. You can start editing immediately.

## Build your first query

Replace the placeholder query in `analytics/queries.ts` with something real. For example:

```typescript
import 'dotenv/config';
import { initServe } from '@hypequery/serve';
import { z } from 'zod';
import { db } from './client';

const { define, queries, query } = initServe({
  context: () => ({ db }),
});

export const api = define({
  queries: queries({
    activeUsers: query
      .describe('Most recent active users')
      .input(z.object({ limit: z.number().min(1).max(500).default(50) }))
      .query(({ ctx, input }) =>
        ctx.db
          .table('users')
          .select(['id', 'email', 'created_at'])
          .where('status', 'eq', 'active')
          .orderBy('created_at', 'DESC')
          .limit(input.limit)
          .execute()
      ),
  }),
});
```

Save the file and, if you're running `hypequery dev`, the docs immediately show the new metric with typed inputs/outputs. You can also call `await api.run('activeUsers')` (alias of `api.execute`) from your app/agent code without the docs.

## Preview with `hypequery dev` (Optional) 

Run the dev server whenever you want docs plus an OpenAPI description for the HTTP surface area of your queries:

```bash
# Without CLI installed
npx @hypequery/cli dev

# Or if CLI is installed
npx hypequery dev
```

The command watches your analytics files, refreshes docs, and exposes:

- http://localhost:4000 – interactive docs for the HTTP endpoints
- http://localhost:4000/openapi.json – OpenAPI description for downstream tooling

Leave this running while you iterate or while teammates need to hit the HTTP preview locally.


## Next steps

- Explore the fluent builder in [Query Building](/docs/define/query-building)
- Regenerate schema types on demand with [`hypequery generate`](/docs/reference/cli#hypequery-generate)

<b>Looking for framework- or use case-specific examples? Check the <a class="font-semibold text-indigo-600 hover:text-indigo-500" href="/docs/recipes">recipes section</a>.</b>
