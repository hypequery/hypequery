---
layout: ../../../layouts/DocsLayout.astro
title: React hooks
description: Use @hypequery/react to generate typed hooks from your hypequery API
---

<div class="prose">

# React hooks

Use `@hypequery/react` to generate type-safe hooks (`useQuery`, `useMutation`) backed by TanStack Query. Bring your existing `defineServe` API types and wire them into your React app without duplicating schemas.

## Installation

```bash
npm install @hypequery/react @tanstack/react-query
```

Peer dependencies: `react@^18`, `@tanstack/react-query@^5`.

## Setup

```ts
// lib/analytics.ts
import { createHooks } from '@hypequery/react';
import type { Api } from '@/analytics/queries';

export const { useQuery, useMutation, HypequeryProvider } = createHooks<Api>({
  baseUrl: '/api', // where your hypequery routes live
});
```

Wrap your app:

```tsx
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { HypequeryProvider } from '@/lib/analytics';

const queryClient = new QueryClient();

export function AppProviders({ children }: { children: React.ReactNode }) {
  return (
    <QueryClientProvider client={queryClient}>
      <HypequeryProvider>{children}</HypequeryProvider>
    </QueryClientProvider>
  );
}
```

## `useQuery`

```tsx
const { data, error, isLoading } = useQuery('weeklyRevenue', {
  startDate: '2025-01-01',
});
```

- `name` is one of your API keys
- `input` matches the endpoint’s `inputSchema`
- Options mirror TanStack Query (`staleTime`, `enabled`, etc.)

## `useMutation`

```tsx
const rebuild = useMutation('rebuildMetrics');
rebuild.mutate({ force: true });
```

Mutations share the same typed `input`/`output` data.

## Advanced options

Both hooks accept the underlying TanStack options, so you can control `staleTime`, retries, invalidation, manual `queryClient` access, etc.

## Error handling

Errors bubble through TanStack Query’s `error` state. Validation errors from hypequery endpoints arrive as structured JSON (status code + body). Network failures throw standard `fetch` errors.

## When to use it

- SPA dashboards needing cached queries
- Next.js / Remix apps already using TanStack Query
- Agents or components calling hypequery APIs inline

If you don’t need React hooks, you can call `api.execute` directly on the server or use the HTTP API as-is.

</div>
